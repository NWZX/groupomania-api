(this.webpackJsonpgroupomania=this.webpackJsonpgroupomania||[]).push([[0],{100:function(e,t,a){},130:function(e,t,a){},131:function(e,t,a){},134:function(e,t,a){},138:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(48),c=a.n(s),i=(a(95),a(96),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/)));function o(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var a=e.installing;null!=a&&(a.onstatechange=function(){"installed"===a.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}var l=a(9),u=a(10),h=a(4),m=a(14),d=a(13),p=(a(97),a(12)),f=a(6),v=a(20),g=(a(98),a(52)),y=a.n(g),b=(a(99),function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={},n.handleClick=n.handleClick.bind(Object(h.a)(n)),n}return Object(u.a)(a,[{key:"handleClick",value:function(e){e.preventDefault(),this.props.onClick()}},{key:"render",value:function(){var e=this.props.className?" "+this.props.className:"";return r.a.createElement("button",{className:"bg-light"+e,style:{boxShadow:v.a.depth8},onClick:this.handleClick},this.props.text)}}]),a}(r.a.Component)),E=(a(100),function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={},n.handleSelect=n.handleSelect.bind(Object(h.a)(n)),n}return Object(u.a)(a,[{key:"handleSelect",value:function(e){this.props.onSelect(e)}},{key:"render",value:function(){var e=this;return r.a.createElement(p.a,{className:"align-vertical"},r.a.createElement("h1",{className:"text-dark"},"Groupomania"),r.a.createElement(f.a,{className:"justify-content-center"},r.a.createElement(b,{text:"Connexion",className:"col-8",onClick:function(){e.handleSelect(P.SignIn)}})),r.a.createElement(f.a,{className:"justify-content-center"},r.a.createElement(b,{text:"Cr\xe9e un compte",className:"col-8",onClick:function(){e.handleSelect(P.SignUp)}})))}}]),a}(r.a.Component)),k=a(2),w=a.n(k),j=a(11),x=a(41),O=a(27),N=a.n(O),C=a(8),S=a.n(C),A="http://207.180.251.133:5000",T=function(){function e(){Object(l.a)(this,e)}return Object(u.a)(e,null,[{key:"getUser",value:function(){var e=Object(j.a)(w.a.mark((function e(t,a){var n,r,s,c;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n="",t||a?t?n='(username: "'.concat(t,'")'):a&&(n="(userId: ".concat(a,")")):n="",r=JSON.stringify({query:"{\n            user".concat(n,"{\n              id\n              username\n              authorization\n            }\n        }"),variables:{}}),s={method:"post",url:A+"/graphql",headers:{Authorization:"Bearer ".concat(S.a.get("token","")),"Content-Type":"application/json"},data:r},e.next=7,N()(s);case 7:return c=e.sent,e.abrupt("return",c.data.data.user);case 11:return e.prev=11,e.t0=e.catch(0),D(e.t0),e.abrupt("return",new Error(e.t0.response.data.errors[0].message));case 15:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t,a){return e.apply(this,arguments)}}()},{key:"createUser",value:function(){var e=Object(j.a)(w.a.mark((function e(t,a){var n,r,s;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=JSON.stringify({query:'mutation{\n            createUser(username: "'.concat(t,'", password: "').concat(a,'"){\n              token\n              username\n            }\n        }'),variables:{}}),r={method:"post",url:A+"/graphql",headers:{"Content-Type":"application/json"},data:n},e.next=5,N()(r);case 5:return s=e.sent,e.abrupt("return",s.data.data.createUser);case 9:return e.prev=9,e.t0=e.catch(0),D(e.t0),e.abrupt("return",new Error(e.t0.response.data.errors[0].message));case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,a){return e.apply(this,arguments)}}()},{key:"loginUser",value:function(){var e=Object(j.a)(w.a.mark((function e(t,a){var n,r,s;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=JSON.stringify({query:'mutation{\n            loginUser(username: "'.concat(t,'", password: "').concat(a,'"){\n              token\n              username\n            }\n        }'),variables:{}}),r={method:"post",url:A+"/graphql",headers:{"Content-Type":"application/json"},data:n},e.next=5,N()(r);case 5:return s=e.sent,e.abrupt("return",s.data.data.loginUser);case 9:return e.prev=9,e.t0=e.catch(0),D(e.t0),e.abrupt("return",new Error(e.t0.response.data.errors[0].message));case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,a){return e.apply(this,arguments)}}()},{key:"delUser",value:function(){var e=Object(j.a)(w.a.mark((function e(t){var a,n,r;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=JSON.stringify({query:'mutation{\n            delUser(username: "'.concat(t,'")\n        }'),variables:{}}),n={method:"post",url:A+"/graphql",headers:{Authorization:"Bearer ".concat(S.a.get("token","")),"Content-Type":"application/json"},data:a},e.next=5,N()(n);case 5:return r=e.sent,e.abrupt("return",r.data.data.delUser);case 9:return e.prev=9,e.t0=e.catch(0),D(e.t0),e.abrupt("return",new Error(e.t0.response.data.errors[0].message));case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}()}]),e}();function D(e){401===e.request.status&&(S.a.remove("user"),S.a.remove("token"),S.a.set("isAuth",!1),window.location.replace("/"))}var P,U=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={error:void 0,username:"",password:""},n.handleSign=n.handleSign.bind(Object(h.a)(n)),n.handleEnterPress=n.handleEnterPress.bind(Object(h.a)(n)),n.handleChangeUsername=n.handleChangeUsername.bind(Object(h.a)(n)),n.handleChangePassword=n.handleChangePassword.bind(Object(h.a)(n)),n}return Object(u.a)(a,[{key:"handleSign",value:function(){var e=Object(j.a)(w.a.mark((function e(){var t;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.loginUser(this.state.username,this.state.password);case 2:(t=e.sent)instanceof Error?this.setState({error:t}):this.props.onSign(t);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"handleEnterPress",value:function(){var e=Object(j.a)(w.a.mark((function e(t){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("Enter"!==t.key){e.next=3;break}return e.next=3,this.handleSign();case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"handleChangeUsername",value:function(e){this.setState({username:e.target.value,error:void 0})}},{key:"handleChangePassword",value:function(e){this.setState({password:e.target.value,error:void 0})}},{key:"renderError",value:function(){return this.state.error?r.a.createElement(f.a,{className:"justify-content-center"},r.a.createElement(x.a,{variant:"danger"},this.state.error.message)):null}},{key:"render",value:function(){return r.a.createElement(p.a,{className:"align-vertical"},this.renderError(),r.a.createElement(f.a,{className:"justify-content-center"},r.a.createElement("input",{type:"text",id:"username",className:"col-8",placeholder:"Nom d'utilisateur",value:this.state.username,onChange:this.handleChangeUsername})),r.a.createElement(f.a,{className:"justify-content-center"},r.a.createElement("input",{type:"password",id:"password",className:"col-8",placeholder:"Mot de passe",value:this.state.password,onChange:this.handleChangePassword,onKeyPress:this.handleEnterPress})),r.a.createElement(f.a,{className:"justify-content-center"},r.a.createElement(b,{text:"Valider",className:"col-8",onClick:this.handleSign})))}}]),a}(n.Component),B=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={error:void 0,username:"",password_1:"",password_2:""},n.handleSign=n.handleSign.bind(Object(h.a)(n)),n.handleChangeUsername=n.handleChangeUsername.bind(Object(h.a)(n)),n.handleChangePassword_1=n.handleChangePassword_1.bind(Object(h.a)(n)),n.handleChangePassword_2=n.handleChangePassword_2.bind(Object(h.a)(n)),n}return Object(u.a)(a,[{key:"handleSign",value:function(){var e=Object(j.a)(w.a.mark((function e(){var t;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.state.password_1===this.state.password_2){e.next=4;break}this.setState({error:new Error("Unmatch password")}),e.next=8;break;case 4:return e.next=6,T.createUser(this.state.username,this.state.password_1);case 6:(t=e.sent)instanceof Error?this.setState({error:t}):this.props.onSign(t);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"handleChangeUsername",value:function(e){this.setState({username:e.target.value,error:void 0})}},{key:"handleChangePassword_1",value:function(e){this.setState({password_1:e.target.value,error:void 0})}},{key:"handleChangePassword_2",value:function(e){this.setState({password_2:e.target.value}),""!==e.target.value&&this.state.password_1!==e.target.value?this.setState({error:new Error("Unmatch password")}):this.setState({error:void 0})}},{key:"renderError",value:function(){return this.state.error?r.a.createElement(f.a,{className:"justify-content-center"},r.a.createElement(x.a,{variant:"danger"},this.state.error.message)):null}},{key:"render",value:function(){return r.a.createElement(p.a,{className:"align-vertical"},this.renderError(),r.a.createElement(f.a,{className:"justify-content-center"},r.a.createElement("input",{type:"text",id:"username",className:"col-8",placeholder:"Nom d'utilisateur",value:this.state.username,onChange:this.handleChangeUsername})),r.a.createElement(f.a,{className:"justify-content-center"},r.a.createElement("input",{type:"password",id:"password",className:"col-8",placeholder:"Mot de passe",value:this.state.password_1,onChange:this.handleChangePassword_1})),r.a.createElement(f.a,{className:"justify-content-center"},r.a.createElement("input",{type:"password",id:"password-confirmation",className:"col-8",placeholder:"Confirmer le mot de passe",value:this.state.password_2,onChange:this.handleChangePassword_2})),r.a.createElement(f.a,{className:"justify-content-center"},r.a.createElement(b,{text:"Valider",className:"col-8",onClick:this.handleSign})))}}]),a}(n.Component);!function(e){e[e.SignIn=0]="SignIn",e[e.SignUp=1]="SignUp",e[e.Empty=2]="Empty"}(P||(P={}));var I,z,M=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={selection:P.Empty},n.handleSelection=n.handleSelection.bind(Object(h.a)(n)),n.handleSignIn=n.handleSignIn.bind(Object(h.a)(n)),n.handleSignUp=n.handleSignUp.bind(Object(h.a)(n)),n}return Object(u.a)(a,[{key:"componentDidMount",value:function(){document.title="SignIn/SignUp"}},{key:"handleSelection",value:function(e){this.setState({selection:e})}},{key:"handleSignIn",value:function(e){this.props.onAuth(e)}},{key:"handleSignUp",value:function(e){this.props.onAuth(e)}},{key:"renderSelected",value:function(e){switch(e){case P.SignIn:return r.a.createElement(U,{onSign:this.handleSignIn});case P.SignUp:return r.a.createElement(B,{onSign:this.handleSignUp});default:return r.a.createElement(E,{onSelect:this.handleSelection})}}},{key:"render",value:function(){return r.a.createElement(p.a,{className:"ac-block align-vertical",style:{boxShadow:v.a.depth8}},r.a.createElement(f.a,null,r.a.createElement("img",{className:"m-auto",src:y.a,alt:"",width:"100px",height:"100px"})),r.a.createElement(f.a,null,this.renderSelected(this.state.selection)))}}]),a}(r.a.Component),F=a(51),q=a(22),R=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"render",value:function(){var e=this.props.className?" "+this.props.className:"";return r.a.createElement("div",{className:"row-fluid"+e},this.props.children)}}]),a}(n.Component);a(130);!function(e){e[e.Text=0]="Text",e[e.Image=1]="Image",e[e.Video=2]="Video"}(I||(I={})),function(e){e.Favoris="\u2728Favoris",e.Media="\ud83c\udfacMedia",e.Talk="\ud83d\udcacDicussion",e.Advert="\ud83d\udce3Annonce"}(z||(z={}));var L="http://207.180.251.133:5000",G=function(){function e(){Object(l.a)(this,e)}return Object(u.a)(e,null,[{key:"getPosts",value:function(){var e=Object(j.a)(w.a.mark((function e(t,a){var n,r,s,c;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n="",t&&a?n="(limit: ".concat(t,", timestamp: ").concat(a,")"):t&&!a?n="(limit: ".concat(t,")"):!t&&a&&(n="(timestamp: ".concat(a,")")),r=JSON.stringify({query:"{\n            posts".concat(n,"{\n              id\n              user{\n                  username\n              }\n              title\n              type\n              categorie\n              data\n              url\n              timestamp\n              commentsNumber\n            }\n        }"),variables:{}}),s={method:"post",url:L+"/graphql",headers:{Authorization:"Bearer ".concat(S.a.get("token","")),"Content-Type":"application/json"},data:r},e.next=7,N()(s);case 7:return c=e.sent,e.abrupt("return",c.data.data.posts);case 11:return e.prev=11,e.t0=e.catch(0),Y(e.t0),e.abrupt("return",new Error(e.t0.response.data.errors[0].message));case 15:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t,a){return e.apply(this,arguments)}}()},{key:"getPost",value:function(){var e=Object(j.a)(w.a.mark((function e(t){var a,n,r;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=JSON.stringify({query:"{\n            post(id: ".concat(t,"){\n              id\n              title\n              user {\n                  username\n              }\n              type\n              categorie\n              data\n              url\n              timestamp\n              comments{\n                id  \n                userId\n                data\n                timestamp\n              }\n            }\n        }"),variables:{}}),n={method:"post",url:L+"/graphql",headers:{Authorization:"Bearer ".concat(S.a.get("token","")),"Content-Type":"application/json"},data:a},e.next=5,N()(n);case 5:return r=e.sent,e.abrupt("return",r.data.data.post);case 9:return e.prev=9,e.t0=e.catch(0),Y(e.t0),e.abrupt("return",new Error(e.t0.response.data.errors[0].message));case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}()},{key:"addPost",value:function(){var e=Object(j.a)(w.a.mark((function e(t,a,n,r,s,c){var i,o,l,u,h,m,d;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,i={result:!0,fileUrl:""},!c){e.next=10;break}return(o=new FormData).append("image",c),l={method:"post",url:L+"/upload",headers:{Authorization:"Bearer ".concat(S.a.get("token",""))},data:o},e.next=8,N()(l);case 8:u=e.sent,i=u.data;case 10:if(!i.result){e.next=18;break}return h=JSON.stringify({query:'mutation{\n            addPost(username: "'.concat(t,'", type:').concat(a,', categorie:"').concat(n,'", title:"').concat(r,'", url:"').concat(i.fileUrl,'", data:"').concat(s,'"){\n              id\n              title\n              type\n              categorie\n              url\n              data\n              timestamp\n            }\n        }'),variables:{}}),console.log({dataQ:h}),m={method:"post",url:L+"/graphql",headers:{Authorization:"Bearer ".concat(S.a.get("token","")),"Content-Type":"application/json"},data:h},e.next=16,N()(m);case 16:return d=e.sent,e.abrupt("return",d.data.data.post);case 18:throw new Error("File upload error");case 21:return e.prev=21,e.t0=e.catch(0),Y(e.t0),e.abrupt("return",new Error(e.t0.response.data.errors[0].message));case 25:case"end":return e.stop()}}),e,null,[[0,21]])})));return function(t,a,n,r,s,c){return e.apply(this,arguments)}}()},{key:"editPost",value:function(){var e=Object(j.a)(w.a.mark((function e(t,a,n,r,s,c,i,o){var l,u,h,m,d,p,f;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,l={result:!0,fileUrl:c},!o){e.next=10;break}return(u=new FormData).append("image",o),h={method:"post",url:L+"/upload",headers:{Authorization:"Bearer ".concat(S.a.get("token",""))},data:u},e.next=8,N()(h);case 8:m=e.sent,l=m.data;case 10:if(!l.result){e.next=17;break}return d=JSON.stringify({query:"mutation{\n            editPost(id: ".concat(t,', username: "').concat(a,'", type:').concat(n,', categorie:"').concat(r,'", title:"').concat(s,'", url:"').concat(l.fileUrl,'", data:"').concat(i,'"){\n              id\n              title\n              type\n              categorie\n              url\n              data\n              timestamp\n            }\n        }'),variables:{}}),p={method:"post",url:L+"/graphql",headers:{Authorization:"Bearer ".concat(S.a.get("token","")),"Content-Type":"application/json"},data:d},e.next=15,N()(p);case 15:return f=e.sent,e.abrupt("return",f.data.data.post);case 17:throw new Error("File upload error");case 20:return e.prev=20,e.t0=e.catch(0),Y(e.t0),e.abrupt("return",new Error(e.t0.response.data.errors[0].message));case 24:case"end":return e.stop()}}),e,null,[[0,20]])})));return function(t,a,n,r,s,c,i,o){return e.apply(this,arguments)}}()},{key:"delPost",value:function(){var e=Object(j.a)(w.a.mark((function e(t,a){var n,r,s;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=JSON.stringify({query:"mutation{\n            delPost(id: ".concat(t,', username: "').concat(a,'")\n        }'),variables:{}}),r={method:"post",url:L+"/graphql",headers:{Authorization:"Bearer ".concat(S.a.get("token","")),"Content-Type":"application/json"},data:n},e.next=5,N()(r);case 5:return s=e.sent,e.abrupt("return",s.data.data.delPost);case 9:return e.prev=9,e.t0=e.catch(0),Y(e.t0),e.abrupt("return",new Error(e.t0.response.data.errors[0].message));case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,a){return e.apply(this,arguments)}}()}]),e}();function Y(e){401===e.request.status&&(S.a.remove("user"),S.a.remove("token"),S.a.set("isAuth",!1),window.location.replace("/"))}var Z,J=a(76),V=a.n(J),X=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={numberOfElement:e.elementList.length,elementPicked:0},n.handleClick=n.handleClick.bind(Object(h.a)(n)),n}return Object(u.a)(a,[{key:"handleClick",value:function(e){this.setState({elementPicked:e}),this.props.onChange&&this.props.onChange(e)}},{key:"generateTab",value:function(e,t,a){var n=this;return a?r.a.createElement("a",{className:"flex-column mx-3 font-weight-bolder active",href:"/#",key:e,onClick:function(){n.handleClick(e)}},t):r.a.createElement("a",{className:"flex-column mx-3 font-weight-bolder",href:"/#",key:e,onClick:function(){n.handleClick(e)}},t)}},{key:"generateList",value:function(){for(var e=[],t=0;t<this.state.numberOfElement;t++){var a=this.props.elementList[t];t===this.state.elementPicked?e.push(this.generateTab(t,a,!0)):e.push(this.generateTab(t,a,!1))}return e}},{key:"render",value:function(){return this.props.ClassName?r.a.createElement("div",{className:this.props.ClassName},this.generateList()):r.a.createElement("div",null,this.generateList())}}]),a}(r.a.Component),H=a(21),K=(a(131),a(53)),W=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={error:void 0},n.handleButtonEdit=n.handleButtonEdit.bind(Object(h.a)(n)),n.handleButtonPost=n.handleButtonPost.bind(Object(h.a)(n)),n.handleButtonDel=n.handleButtonDel.bind(Object(h.a)(n)),n}return Object(u.a)(a,[{key:"handleButtonEdit",value:function(){var e=Object(j.a)(w.a.mark((function e(){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.props.history.push("/editPost/".concat(this.props.id));case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"handleButtonPost",value:function(){var e=Object(j.a)(w.a.mark((function e(){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.props.history.push("/post/".concat(this.props.id));case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"handleButtonDel",value:function(){var e=Object(j.a)(w.a.mark((function e(){var t;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,G.delPost(this.props.id,S.a.get("user",""));case 2:(t=e.sent)instanceof Error?this.setState({error:t}):t?this.props.onDelete?this.props.onDelete(this.props.id):this.props.history.push("/"):this.setState({error:new Error("Une erreur c'est produite.")});case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"commentNumberConvert",value:function(e){return e>1e6?(e/1e6).toFixed(1)+"M":e>1e3?(e/1e3).toFixed(1)+"K":e.toString()}},{key:"renderTimestamp",value:function(e){var t=Date.now()/1e3-e;return t<60?"".concat(t.toFixed(0)," sec"):t<3600?"".concat((t/60).toFixed(0)," min"):t<86400?"".concat((t/3600).toFixed(0)," heure"):"".concat((t/3600/24).toFixed(0)," jour")}},{key:"renderByType",value:function(e){switch(e){case I.Text:return r.a.createElement("p",{className:"col-10"},this.props.data);case I.Image:return r.a.createElement("img",{className:"img-fluid col-10",src:this.props.url,alt:""});case I.Video:return r.a.createElement("video",{className:"embed-responsive col-10",src:this.props.url});default:return r.a.createElement("p",null,"Content type error")}}},{key:"renderButton",value:function(e){var t=this.props.commentsNumber?this.props.commentsNumber:0,a=e.edit?r.a.createElement(H.a,null,r.a.createElement(b,{text:"\ud83d\udd8b Editer",className:"mx-0 col-12",onClick:this.handleButtonEdit})):null,n=e.delete?r.a.createElement(H.a,null,r.a.createElement(b,{text:"\ud83d\uddd1 Effacer",className:"mx-0 col-12",onClick:this.handleButtonDel})):null,s=e.comment?r.a.createElement(H.a,null,r.a.createElement(b,{text:"\ud83d\udcac"+this.commentNumberConvert(t),className:"mx-0 col-12",onClick:this.handleButtonPost})):null;return r.a.createElement(f.a,{className:"justify-content-center space-row"},a,s,n)}},{key:"render",value:function(){return r.a.createElement(R,null,r.a.createElement(p.a,{fluid:!0,className:"ac-block mx-auto my-4 align-middle",style:{boxShadow:v.a.depth8,animation:K.a.slideDownIn.replace("100ms","400ms")}},r.a.createElement(f.a,{className:"justify-content-center"},r.a.createElement("h2",{className:"col-10 text-center font-weight-bolder"},this.props.title),r.a.createElement("p",{className:"col-10 text-center"},r.a.createElement("em",{className:"small"},"Envoyer par ",r.a.createElement("strong",null,this.props.user.username),", il y a"," ",this.renderTimestamp(this.props.timestamp)))),r.a.createElement(f.a,{className:"justify-content-center"},this.renderByType(this.props.type)),this.renderButton(this.props.showButton)))}}]),a}(n.Component),Q=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={search:"",categorieList:[z.Favoris,z.Media,z.Talk,z.Advert],categorieFocused:e.setDefaultTab,loadItemLimit:10,lastTimestamp:0,data:[],error:void 0,user:void 0},n.handleSearch=n.handleSearch.bind(Object(h.a)(n)),n.handleTabChange=n.handleTabChange.bind(Object(h.a)(n)),n.handleNewPost=n.handleNewPost.bind(Object(h.a)(n)),n.handleProfile=n.handleProfile.bind(Object(h.a)(n)),n.getUser=n.getUser.bind(Object(h.a)(n)),n.handleDelete=n.handleDelete.bind(Object(h.a)(n)),n}return Object(u.a)(a,[{key:"componentDidMount",value:function(){var e=this;document.title="Feed - Groupomania",this.getUser(),this.getData(10,0).then((function(t){e.setState({data:t})}))}},{key:"handleSearch",value:function(e){this.setState({search:e.target.value})}},{key:"handleTabChange",value:function(e){this.setState({categorieFocused:this.state.categorieList[e]})}},{key:"handleNewPost",value:function(){this.props.history.push("/newPost")}},{key:"handleProfile",value:function(e){e.preventDefault(),this.props.history.push("/profile/"+S.a.get("user",""))}},{key:"handleDelete",value:function(e){var t=this.state.data;console.log({temp:t}),t.splice(t.findIndex((function(t){return t.id===e})),1),console.log({temp:t}),this.setState({data:t})}},{key:"getData",value:function(){var e=Object(j.a)(w.a.mark((function e(t,a){var n;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,G.getPosts(t,a);case 2:if(!((n=e.sent)instanceof Error)){e.next=8;break}return this.setState({error:n}),e.abrupt("return",[]);case 8:return e.abrupt("return",n);case 9:case"end":return e.stop()}}),e,this)})));return function(t,a){return e.apply(this,arguments)}}()},{key:"getUser",value:function(){var e=Object(j.a)(w.a.mark((function e(){var t;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.getUser(S.a.get("user",""));case 2:(t=e.sent)instanceof Error?this.setState({error:t}):this.setState({user:t});case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"renderData",value:function(e){for(var t=[],a=0;a<this.state.data.length;a++){var n=this.state.data[a],s="undefined"!==typeof this.state.user&&(1===this.state.user.authorization||this.state.user.username===n.user.username);n.categorie.includes(e)&&t.push(r.a.createElement(W,{history:this.props.history,showButton:{edit:s,comment:!0,delete:s},key:a,id:n.id,user:n.user,title:n.title,data:n.data,url:n.url,type:n.type,categorie:n.categorie,timestamp:n.timestamp,commentsNumber:n.commentsNumber,onDelete:this.handleDelete}))}return t}},{key:"render",value:function(){return r.a.createElement(p.a,{fluid:!0,className:"p-0"},r.a.createElement(R,null,r.a.createElement(p.a,{fluid:!0,className:"ac-block align-middle",style:{boxShadow:v.a.depth8}},r.a.createElement(f.a,{className:"justify-content-center"},r.a.createElement("div",{className:"col-10"},r.a.createElement("img",{src:y.a,alt:"",className:"img-fluid logo"}),r.a.createElement("h1",{className:"d-inline-block m-0 align-vertical"},"Groupomania")),r.a.createElement("div",{className:"col-2 p-0 d-flex my-auto text-center"},r.a.createElement("a",{href:"/profile/".concat(S.a.get("user","")),onClick:this.handleProfile},r.a.createElement("img",{src:V.a,alt:"",className:"img-fluid user-icon"})))))),r.a.createElement(R,null,r.a.createElement(p.a,{fluid:!0,className:"ac-block mx-auto my-1 align-middle",style:{boxShadow:v.a.depth8}},r.a.createElement("div",{className:"row-fluid justify-content-center"},r.a.createElement("input",{type:"search",placeholder:"\ud83d\udd0dRechercher",value:this.state.search,onChange:this.handleSearch})),r.a.createElement(X,{elementList:this.state.categorieList,onChange:this.handleTabChange,ClassName:"row justify-content-center"}))),r.a.createElement(R,null,r.a.createElement(R,null,r.a.createElement(p.a,{fluid:!0,className:"ac-block mx-auto my-1 align-middle",style:{boxShadow:v.a.depth8}},r.a.createElement(b,{text:"Cr\xe9e un post",className:"col-8",onClick:this.handleNewPost})))),this.renderData(this.state.categorieFocused))}}]),a}(r.a.Component),_=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"render",value:function(){return this.props.isAuth?r.a.createElement("div",{className:"mx-auto w-100"},this.props.children):r.a.createElement(q.a,{to:this.props.path})}}]),a}(n.Component),$=(a(134),function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={error:void 0,username:""},n.getUsername=n.getUsername.bind(Object(h.a)(n)),n}return Object(u.a)(a,[{key:"componentDidMount",value:function(){this.getUsername()}},{key:"renderTimestamp",value:function(e){var t=Date.now()/1e3-e;return t<60?"".concat(t.toFixed(0)," s"):t<3600?"".concat((t/60).toFixed(0)," m"):t<86400?"".concat((t/3600).toFixed(0)," h"):"".concat((t/3600/24).toFixed(0)," j")}},{key:"getUsername",value:function(){var e=Object(j.a)(w.a.mark((function e(){var t;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.getUser(void 0,this.props.userId);case 2:(t=e.sent)instanceof Error?this.setState({error:t}):this.setState({username:t.username});case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return r.a.createElement(R,null,r.a.createElement(p.a,{fluid:!0,className:"ac-block mx-auto my-4 align-middle",style:{boxShadow:v.a.depth8,animation:K.a.slideRightIn.replace("100ms","400ms")}},r.a.createElement(f.a,{className:"justify-content-center"},r.a.createElement("h3",{className:"col-10 text-justify font-weight-bolder"},this.state.username)),r.a.createElement(f.a,{className:"justify-content-center"},r.a.createElement("span",{className:"col-10 text-justify font-weight-light"},this.renderTimestamp(this.props.timestamp))),r.a.createElement(f.a,{className:"row justify-content-center"},r.a.createElement("p",{className:"col-10 text-justify"},this.props.data))))}}]),a}(n.Component)),ee=function(){function e(){Object(l.a)(this,e)}return Object(u.a)(e,null,[{key:"addComment",value:function(){var e=Object(j.a)(w.a.mark((function e(t,a,n){var r,s,c;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r=JSON.stringify({query:'mutation{\n            addComment(username: "'.concat(t,'", postId:').concat(a,', data:"').concat(n,'"){\n              id\n              userId\n              data\n              timestamp\n            }\n        }'),variables:{}}),s={method:"post",url:"http://localhost:4000/graphql",headers:{Authorization:"Bearer ".concat(S.a.get("token","")),"Content-Type":"application/json"},data:r},e.next=5,N()(s);case 5:return c=e.sent,e.abrupt("return",c.data.data.addComment);case 9:return e.prev=9,e.t0=e.catch(0),e.abrupt("return",new Error(e.t0.response.data.errors[0].message));case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,a,n){return e.apply(this,arguments)}}()}]),e}(),te=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={id:Number.parseFloat(e.match.params.postId),data:void 0,error:void 0,commentText:"",user:void 0},n.handleBack=n.handleBack.bind(Object(h.a)(n)),n.handleNewComment=n.handleNewComment.bind(Object(h.a)(n)),n.handleTextChange=n.handleTextChange.bind(Object(h.a)(n)),n.getUser=n.getUser.bind(Object(h.a)(n)),window.onscroll=function(){var e=document.getElementById("header");e&&(window.pageYOffset-30>e.offsetTop?e.classList.add("stick"):e.classList.remove("stick"))},n}return Object(u.a)(a,[{key:"componentDidMount",value:function(){document.title="Post - Groupomania",this.getUser(),this.getData(this.state.id)}},{key:"getData",value:function(){var e=Object(j.a)(w.a.mark((function e(t){var a;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,G.getPost(t);case 2:(a=e.sent)instanceof Error?this.setState({error:a}):this.setState({data:a});case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getUser",value:function(){var e=Object(j.a)(w.a.mark((function e(){var t;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.getUser(S.a.get("user",""));case 2:(t=e.sent)instanceof Error?this.setState({error:t}):this.setState({user:t});case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"renderData",value:function(){var e=this.state.data;if(e){var t="undefined"!==typeof this.state.user&&(1===this.state.user.authorization||this.state.user.username===e.user.username);return r.a.createElement(W,{history:this.props.history,showButton:{edit:t,comment:!1,delete:t},id:e.id,user:e.user,title:e.title,data:e.data,url:e.url,type:e.type,timestamp:e.timestamp,categorie:e.categorie})}return this.state.error?r.a.createElement(q.a,{to:"/404"}):null}},{key:"renderComment",value:function(){var e=this.state.data;if(e){var t=[];if(e.comments){for(var a=0;a<e.comments.length;a++){var n=e.comments[a];t.push(r.a.createElement($,Object.assign({key:a},n)))}return t}}return null}},{key:"handleBack",value:function(){this.props.history.push("/")}},{key:"handleTextChange",value:function(e){this.setState({commentText:e.target.value})}},{key:"handleNewComment",value:function(){var e=Object(j.a)(w.a.mark((function e(){var t,a,n,r;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.state.data){e.next=6;break}return t=S.a.get("user",""),e.next=4,ee.addComment(t,this.state.data.id,this.state.commentText);case 4:(a=e.sent)instanceof Error?this.setState({error:a}):(r=this.state.data,null===(n=r.comments)||void 0===n||n.push(a),this.setState({data:r,commentText:""}));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return r.a.createElement(p.a,{fluid:!0,className:"p-0"},r.a.createElement(R,null,r.a.createElement(p.a,{fluid:!0,className:"ac-block align-middle",style:{boxShadow:v.a.depth8},id:"header"},r.a.createElement(f.a,{className:"justify-content-center"},r.a.createElement("div",{className:"col-4 p-0"},r.a.createElement(b,{text:"Back",onClick:this.handleBack,className:"m-0 col-8"})),r.a.createElement("h1",{className:"col-8 p-0 text-justify m-0 align-vertical"},"Groupomania")))),r.a.createElement("div",{style:{marginTop:"4vh"}}),this.renderData(),r.a.createElement(R,null,r.a.createElement(p.a,{fluid:!0,className:"ac-block mx-auto my-1 align-middle",style:{boxShadow:v.a.depth8}},r.a.createElement(f.a,{className:"justify-content-center"},r.a.createElement("label",{htmlFor:"comment",className:"font-weight-bolder"},"Vous souhaiter r\xe9agire ?"," ")),r.a.createElement(f.a,{className:"justify-content-center"},r.a.createElement("textarea",{className:"col-8",id:"comment",onChange:this.handleTextChange,value:this.state.commentText,placeholder:"Texte (3-300 character)"})),r.a.createElement(f.a,{className:"justify-content-center"},r.a.createElement(b,{text:"Envoyer",className:"col-8",onClick:this.handleNewComment})))),this.renderComment())}}]),a}(r.a.Component),ae=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={error:void 0,username:e.match.params.username,authorization:0},n.handleBack=n.handleBack.bind(Object(h.a)(n)),n.handleDelete=n.handleDelete.bind(Object(h.a)(n)),n}return Object(u.a)(a,[{key:"componentDidMount",value:function(){this.getAuthorization(),document.title="Profile - Groupomania"}},{key:"getAuthorization",value:function(){var e=Object(j.a)(w.a.mark((function e(){var t;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.getUser(this.state.username);case 2:(t=e.sent)instanceof Error?this.setState({error:t}):this.setState({authorization:t.authorization});case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"renderAuthorization",value:function(e){switch(e){case 1:return"Moderateur";default:return"Utilisateur"}}},{key:"renderData",value:function(){return this.state.error?r.a.createElement(f.a,{className:"justify-content-center"},r.a.createElement(x.a,{variant:"danger"},this.state.error.message)):[r.a.createElement(f.a,{key:0,className:"justify-content-center"},r.a.createElement("p",{className:"col-12 col-sm-3 font-weight-bolder"},"Utilisateur :"),r.a.createElement("p",{className:"col-sm-3"},this.state.username)),r.a.createElement(f.a,{key:1,className:"justify-content-center"},r.a.createElement("p",{className:"col-12 col-sm-3 font-weight-bolder"},"Status :"),r.a.createElement("p",{className:"col-sm-3"},this.renderAuthorization(this.state.authorization)))]}},{key:"handleBack",value:function(){this.props.history.push("/")}},{key:"handleLogOut",value:function(){S.a.remove("user"),S.a.remove("token"),S.a.set("isAuth",!1),window.location.replace("/")}},{key:"handleDelete",value:function(){var e=Object(j.a)(w.a.mark((function e(){var t;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.delUser(this.state.username);case 2:(t=e.sent)instanceof Error?this.setState({error:t}):t?this.props.history.push("/"):this.setState({error:new Error("Une erreur c'est produite.")}),this.handleLogOut();case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return r.a.createElement(p.a,{fluid:!0,className:"p-0"},r.a.createElement(R,null,r.a.createElement(p.a,{fluid:!0,className:"ac-block align-middle",style:{boxShadow:v.a.depth8}},r.a.createElement(f.a,{className:"justify-content-center"},r.a.createElement("div",{className:"col-4 p-0"},r.a.createElement(b,{text:"Back",onClick:this.handleBack,className:"m-0 col-8"})),r.a.createElement("h1",{className:"col-8 p-0 text-justify m-0 align-vertical"},"Profile")))),r.a.createElement("div",{style:{marginTop:"4vh"}}),r.a.createElement(R,null,r.a.createElement(p.a,{fluid:!0,className:"ac-block mx-auto my-1 align-middle",style:{boxShadow:v.a.depth8}},this.renderData())),r.a.createElement(R,null,r.a.createElement(p.a,{fluid:!0,className:"ac-block mx-auto my-1 align-middle",style:{boxShadow:v.a.depth8}},this.state.username===S.a.get("user","")&&r.a.createElement(f.a,{className:"justify-content-center"},r.a.createElement(H.a,{sm:6},r.a.createElement(b,{text:"Deconnexion",className:"col-8",onClick:this.handleLogOut})),r.a.createElement(H.a,{sm:6},r.a.createElement(b,{text:"Supprimer votre compte",className:"col-8",onClick:this.handleDelete})))||null)))}}]),a}(n.Component);!function(e){e[e.edit=0]="edit",e[e.new=1]="new"}(Z||(Z={}));var ne=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={error:void 0,title:"",type:I.Text,categorie:[],file:void 0,url:"",text:"",allowedImageType:["image/png","image/jpeg","image/webp","image/gif"],allowedVideoType:["video/webm"],authorization:0},n.handleBack=n.handleBack.bind(Object(h.a)(n)),n.handleTitle=n.handleTitle.bind(Object(h.a)(n)),n.handleTextArea=n.handleTextArea.bind(Object(h.a)(n)),n.handleTypeSelect=n.handleTypeSelect.bind(Object(h.a)(n)),n.handleCategorieSelect=n.handleCategorieSelect.bind(Object(h.a)(n)),n.handleImageChange=n.handleImageChange.bind(Object(h.a)(n)),n.handleVideoChange=n.handleVideoChange.bind(Object(h.a)(n)),n.handleSend=n.handleSend.bind(Object(h.a)(n)),n}return Object(u.a)(a,[{key:"componentDidMount",value:function(){this.props.mode===Z.edit&&this.props.match.params.postId?(document.title="Edit post - Groupomania",this.getAuthorization(),this.getData(Number.parseFloat(this.props.match.params.postId))):(document.title="New post - Groupomania",this.getAuthorization())}},{key:"getAuthorization",value:function(){var e=Object(j.a)(w.a.mark((function e(){var t;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.getUser(S.a.get("user",""));case 2:(t=e.sent)instanceof Error?this.setState({error:t}):this.setState({authorization:t.authorization});case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getData",value:function(){var e=Object(j.a)(w.a.mark((function e(t){var a,n,r=this;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,G.getPost(t);case 2:(a=e.sent)instanceof Error?this.setState({error:a}):(this.setState({title:a.title,type:a.type,text:a.data,categorie:a.categorie.split(",")}),(n=document.getElementById("file_img"))&&(n.style.display="inline",n.src=a.url,this.setState({url:a.url})),a.categorie.split(",").forEach((function(e){switch(e){case z.Favoris:1===r.state.authorization&&(document.getElementById("checkbox_favoris").checked=!0);break;case z.Media:document.getElementById("checkbox_media").checked=!0;break;case z.Talk:document.getElementById("checkbox_talk").checked=!0;break;case z.Advert:document.getElementById("checkbox_advert").checked=!0}})));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"renderError",value:function(){return this.state.error?r.a.createElement(f.a,{className:"justify-content-center"},r.a.createElement(x.a,{variant:"danger"},this.state.error.message)):null}},{key:"handleBack",value:function(){this.props.history.push("/")}},{key:"handleTitle",value:function(e){this.setState({title:e.target.value})}},{key:"handleTypeSelect",value:function(e){this.setState({type:Number.parseInt(e.target.value)})}},{key:"handleTextArea",value:function(e){this.setState({text:e.target.value})}},{key:"renderTypeSelect",value:function(e){switch(e){case I.Text:if(this.state.categorie.includes(z.Media)){var t=this.state.categorie;t.splice(t.indexOf(z.Media),1),this.setState({categorie:t})}return r.a.createElement(f.a,{className:"justify-content-center",style:{marginTop:"1vh"}},r.a.createElement(H.a,{sm:2},r.a.createElement("label",{htmlFor:"text",className:"p-0 m-0 align-vertical font-weight-bolder"},"Texte")),r.a.createElement(H.a,null,r.a.createElement("textarea",{id:"text",className:"m-0",placeholder:"Texte (20 \xe0 1000 charact\xe8re)",rows:4,value:this.state.text,onChange:this.handleTextArea})));case I.Image:if(this.state.categorie.includes(z.Talk)){var a=this.state.categorie;a.splice(a.indexOf(z.Talk),1),this.setState({categorie:a})}return[r.a.createElement(f.a,{key:"0",className:"justify-content-center",style:{marginTop:"1vh"}},r.a.createElement(H.a,{sm:2},r.a.createElement("label",{htmlFor:"img",className:"p-0 m-0 align-vertical font-weight-bolder"},"Image/Gif")),r.a.createElement(H.a,null,r.a.createElement("input",{type:"file",accept:this.state.allowedImageType.toString(),id:"img",className:"m-0",onChange:this.handleImageChange}))),r.a.createElement(f.a,{key:"1",className:"justify-content-center",style:{marginTop:"1vh"}},r.a.createElement("img",{id:"file_img",alt:"Petit aper\xe7u du contenue",width:200,style:{display:"none"}}))];case I.Video:return r.a.createElement(f.a,{className:"justify-content-center",style:{marginTop:"1vh"}},r.a.createElement(H.a,{sm:2},r.a.createElement("label",{htmlFor:"video",className:"p-0 m-0 align-vertical font-weight-bolder"},"Vid\xe9o")),r.a.createElement(H.a,null,r.a.createElement("input",{type:"file",accept:this.state.allowedVideoType.toString(),id:"video",className:"m-0",onChange:this.handleVideoChange})));default:return null}}},{key:"handleCategorieSelect",value:function(e){var t=this.state.categorie;this.state.categorie.includes(e.target.value)?(t.splice(t.indexOf(e.target.value),1),this.setState({categorie:t})):(t.push(e.target.value),this.setState({categorie:t}))}},{key:"handleImageChange",value:function(e){if(e.target.files){var t=e.target.files.item(0);if(t)if(this.state.allowedImageType.includes(t.type))if(t.size<2e6){if(this.setState({error:void 0,file:t}),FileReader){var a=new FileReader;a.onload=function(){var e=document.getElementById("file_img");e&&"string"===typeof a.result&&(e.src=a.result,e.style.display="inline")},a.readAsDataURL(t)}}else this.setState({error:new Error("Fichier trop volumineux")});else this.setState({error:new Error("Format de fichier invalide")})}}},{key:"handleVideoChange",value:function(e){if(e.target.files){var t=e.target.files.item(0);t&&(this.state.allowedVideoType.includes(t.type)?t.size<4e6?this.setState({error:void 0,file:t}):this.setState({error:new Error("Fichier trop volumineux")}):this.setState({error:new Error("Format de fichier invalide")}))}}},{key:"handleSend",value:function(){var e=Object(j.a)(w.a.mark((function e(){var t;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=void 0,e.t0=this.props.mode,e.next=e.t0===Z.new?4:e.t0===Z.edit?9:14;break;case 4:return e.next=6,G.addPost(S.a.get("user",""),this.state.type.valueOf(),this.state.categorie.toString(),this.state.title,this.state.text,this.state.file);case 6:return(t=e.sent)instanceof Error?this.setState({error:t}):this.props.history.push("/"),e.abrupt("break",15);case 9:return e.next=11,G.editPost(Number.parseFloat(this.props.match.params.postId),S.a.get("user",""),this.state.type.valueOf(),this.state.categorie.toString(),this.state.title,this.state.url,this.state.text,this.state.file);case 11:return(t=e.sent)instanceof Error?this.setState({error:t}):this.props.history.push("/"),e.abrupt("break",15);case 14:return e.abrupt("break",15);case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"renderTitle",value:function(e){switch(e){case Z.edit:return"Editer";case Z.new:return"Cr\xe9e";default:return""}}},{key:"render",value:function(){return r.a.createElement(p.a,{fluid:!0,className:"p-0"},r.a.createElement(R,null,r.a.createElement(p.a,{fluid:!0,className:"ac-block align-middle",style:{boxShadow:v.a.depth8}},r.a.createElement(f.a,{className:"justify-content-center"},r.a.createElement("div",{className:"col-4 p-0"},r.a.createElement(b,{text:"Back",onClick:this.handleBack,className:"m-0 col-8"})),r.a.createElement("h1",{className:"col-8 p-0 text-justify m-0 align-vertical"},this.renderTitle(this.props.mode)," un post")))),r.a.createElement("div",{style:{marginTop:"4vh"}}),r.a.createElement(R,null,r.a.createElement(p.a,{fluid:!0,className:"ac-block mx-auto my-1 align-middle",style:{boxShadow:v.a.depth8}},this.renderError(),r.a.createElement(f.a,{className:"justify-content-center"},r.a.createElement(H.a,{sm:2},r.a.createElement("label",{htmlFor:"title",className:"p-0 m-0 align-vertical font-weight-bolder"},"Titre")),r.a.createElement(H.a,null,r.a.createElement("input",{type:"text",id:"title",className:"m-0",placeholder:"Titre (3 \xe0 200 charact\xe8re)",onChange:this.handleTitle,value:this.state.title}))),r.a.createElement(f.a,{className:"justify-content-center",style:{marginTop:"1vh"}},r.a.createElement(H.a,{sm:2},r.a.createElement("label",{htmlFor:"type",className:"p-0 m-0 align-vertical font-weight-bolder"},"Type")),r.a.createElement(H.a,null,r.a.createElement("select",{id:"type",className:"m-0",onChange:this.handleTypeSelect,value:this.state.type},r.a.createElement("option",{value:"0"},"Texte"),r.a.createElement("option",{value:"1"},"Image/Gif")))),r.a.createElement(f.a,{className:"justify-content-center",style:{marginTop:"1vh"}},r.a.createElement(H.a,{sm:2,className:"my-auto"},r.a.createElement("span",{className:"font-weight-bolder"},"Categorie")),1===this.state.authorization&&r.a.createElement(H.a,{sm:3},r.a.createElement("div",null,r.a.createElement("input",{type:"checkbox",id:"checkbox_favoris",onChange:this.handleCategorieSelect,value:z.Favoris})),r.a.createElement("div",null,z.Favoris))||null,this.state.type===I.Image&&r.a.createElement(H.a,{sm:5-1*this.state.authorization},r.a.createElement("div",null,r.a.createElement("input",{type:"checkbox",id:"checkbox_media",onChange:this.handleCategorieSelect,value:z.Media})),r.a.createElement("div",null,z.Media))||null,this.state.type===I.Text&&r.a.createElement(H.a,{sm:5-1*this.state.authorization},r.a.createElement("div",null,r.a.createElement("input",{type:"checkbox",id:"checkbox_talk",onChange:this.handleCategorieSelect,value:z.Talk})),r.a.createElement("div",null,z.Talk))||null,(this.state.type===I.Text||this.state.type===I.Image)&&r.a.createElement(H.a,{sm:5-2*this.state.authorization},r.a.createElement("div",null,r.a.createElement("input",{type:"checkbox",id:"checkbox_advert",onChange:this.handleCategorieSelect,value:z.Advert})),r.a.createElement("div",null,z.Advert))||null),this.renderTypeSelect(this.state.type))),r.a.createElement(R,null,r.a.createElement(p.a,{fluid:!0,className:"ac-block mx-auto my-1 align-middle",style:{boxShadow:v.a.depth8}},r.a.createElement(f.a,{className:"justify-content-center"},r.a.createElement(b,{text:"Envoyer",className:"col-8",onClick:this.handleSend})))))}}]),a}(n.Component),re=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).handleBack=n.handleBack.bind(Object(h.a)(n)),n}return Object(u.a)(a,[{key:"componentDidMount",value:function(){document.title="Page 404"}},{key:"handleBack",value:function(){this.props.history.push("/")}},{key:"render",value:function(){return r.a.createElement(p.a,{className:"ac-block align-vertical",style:{boxShadow:v.a.depth8}},r.a.createElement(f.a,null,r.a.createElement(p.a,{className:"align-vertical"},r.a.createElement(f.a,{className:"justify-content-center"},r.a.createElement("h1",{className:"h1"},"404")),r.a.createElement(f.a,{className:"justify-content-center"},r.a.createElement("h2",null,"Page not found")),r.a.createElement(f.a,{className:"justify-content-center"},r.a.createElement(b,{text:"Retour",className:"col-8",onClick:this.handleBack})))))}}]),a}(n.Component),se=a(142),ce=a(143),ie=a(144),oe=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={token:S.a.get("token",""),isAuth:S.a.get("isAuth",!1),username:S.a.get("user",""),client:new se.a({uri:"http://localhost:4000/graphql",cache:new ce.a})},n.handleAuth=n.handleAuth.bind(Object(h.a)(n)),n}return Object(u.a)(a,[{key:"handleAuth",value:function(e){S.a.set("token",e.token),S.a.set("isAuth",!0),S.a.set("user",e.username),this.setState({token:e.token,isAuth:!0,username:e.username}),window.location.replace("/")}},{key:"render",value:function(){var e=this;return r.a.createElement(ie.a,{client:this.state.client},r.a.createElement(F.a,null,r.a.createElement(q.d,null,r.a.createElement(q.b,{exact:!0,path:"/auth",render:function(t){return r.a.createElement(M,Object.assign({},t,{onAuth:e.handleAuth}))}}),r.a.createElement(q.b,{exact:!0,path:"/",render:function(t){return r.a.createElement(_,{isAuth:e.state.isAuth,path:"/auth"},r.a.createElement(Q,Object.assign({},t,{setDefaultTab:z.Favoris})))}}),r.a.createElement(q.b,{path:"/post/:postId",render:function(t){return r.a.createElement(_,{isAuth:e.state.isAuth,path:"/auth"},r.a.createElement(te,t))}}),r.a.createElement(q.b,{exact:!0,path:"/newPost",render:function(t){return r.a.createElement(_,{isAuth:e.state.isAuth,path:"/auth"},r.a.createElement(ne,Object.assign({mode:1},t)))}}),r.a.createElement(q.b,{exact:!0,path:"/editPost/:postId",render:function(t){return r.a.createElement(_,{isAuth:e.state.isAuth,path:"/auth"},r.a.createElement(ne,Object.assign({mode:0},t)))}}),r.a.createElement(q.b,{path:"/profile/:username",component:ae}),r.a.createElement(q.b,{path:"/404",component:re}),r.a.createElement(q.a,{to:"/404"}))))}}]),a}(r.a.Component);c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(oe,null)),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("","/service-worker.js");i?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(a){var n=a.headers.get("content-type");404===a.status||null!=n&&-1===n.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):o(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):o(t,e)}))}}()},52:function(e,t){e.exports="data:image/png;base64,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"},76:function(e,t,a){e.exports=a.p+"static/media/user-solid.a617dfb6.svg"},90:function(e,t,a){e.exports=a(138)},96:function(e,t,a){},97:function(e,t,a){},98:function(e,t,a){},99:function(e,t,a){}},[[90,1,2]]]);
//# sourceMappingURL=main.3ef059e1.chunk.js.map